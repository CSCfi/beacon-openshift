<div ng-if="!cookieLoggedIn" class="col-md-2 ml-md-auto"><a href="http://localhost:8080/app"><img width="150" src="assets/elixir-login-new.png" title="ELIXIR AAI"></a></img></div>
<div ng-if="cookieLoggedIn" class="col-md-3 ml-md-auto"><span class="user-logged-in"><i class="fas fa-user" title="Bona Fide"></i> Riis Ã–rtser</span> <a href="" title="Destroy cookies">Log Out <i class="fas fa-sign-out-alt"></i></a></div>
<h1 style="display:none;">ELIXIR Beacon Network</h1></br>
<h2 style="text-align:center;"><a href="http://86.50.169.120:9090/beacon/"><img id="logo" src="assets/beacon-small-3.png"></a></img></h2>

<!--<div class="row row-backbordered"> BREAKS THE DOCUMENT-->
<div class="col-sm-12">
  <div class="card search-card">
    <div class="card-body">
      <div class="mx-auto" layout="column" ng-controller="ViewCtrl as ctrl" ng-cloak>
      <md-content class="md-padding">
      <form name="searchForm" ng-submit="submit()" class="form-inline" method="get" action="#">
          <div layout-gt-sm="row" class="searchRow">
          <md-input-container>
          <md-select ng-model="search.type" aria-label="Select disease, gene or variant">
            <md-option value="disease" ng-selected="true">Disease</md-option>
            <md-option value="variant">Variant</md-option>
            <md-option value="gene">Gene</md-option>
          </md-select>
          </md-input-container>
          <md-input-container>
          <md-select ng-model="assembly.selected" ng-if="search.type == 'gene' || search.type == 'variant'" aria-label="Gene/Variant Select">
            <md-option value="GRCh38">GRCh38</md-option>
            <md-option value="GRCh37">GRCh37</md-option>
          </md-select>
        </md-input-container>
          <md-autocomplete flex
            md-selected-item="ctrl.selectedItem"
            md-input-name="autocompleteField"
            md-search-text="ctrl.searchText"
            md-items="item in ctrl.querySearch(ctrl.searchText)"
            md-item-text="item.phenotype_name"
            md-min-length="0"
            class="searchBox"
            md-input-minlength="4"
            md-floating-label="Search for disease, gene or variant">

            <md-item-template>
              <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.phenotype_name}} {{item.gene}}</span>
            </md-item-template>
            <div ng-messages="searchForm.autocompleteField.$error" ng-if="searchForm.autocompleteField.$touched">
              <div ng-message="minlength">Your entry is not long enough. Need at least 4 characters!</div>
            </div>
          </md-autocomplete>
          <button type="submit" name="submit" id="submit" value="Submit" class="btn btn-primary"><i class="fas fa-search"></i></button>
        </div>

      </form>
      </md-content>
      </div>
      <!-- <div style="text-align:center"><a href="" ng-click="searchExample(search.type)">Show example search term</a></div> -->
    </div>
  </div>
  <!--<div ng-if="search.type == 'disease' && url.includes('disease')" class="row result-row">-->
  <div ng-if="search.type == 'disease' && url.includes('disease') && message.data.http !== 404 && message.data.http !== 400" class="row result-row">
    <div ng-repeat="datum in message.data">
      <div class="result-box"><div class="result-header" title="Disease Genotype">{{ datum.genotype_name || "Genotype n/a" }}</div>
                                    <div class="result-contents"><b>Phenotype:</b> {{ datum.phenotype_name }}<br>
                                    <b>Gene:</b> {{ datum.gene }}<br>
                                    <b>More Info:</b> <span ng-if="datum.genotype_id.includes('ORPHA')">{{ datum.genotype_id }}</span>
                                                      <a ng-if="datum.genotype_id.includes('OMIM')" target="_blank" href="https://omim.org/entry/{{ datum.genotype_id.replace('OMIM:', '') }}">{{ datum.genotype_id }} <i class="fas fa-external-link-alt"></i></a><br><hr>
                                    <div style="text-align:center"><input type="submit" ng-click="goToGene(datum.gene)" value="Browse Variants" class="btn" style="background-color:#F57C20;color:#FFF" /></div></div>
                                  </div>
    </div>
  </div>
  <!--<div ng-if="search.type == 'gene' && url.includes('gene')" class="result-row">-->
  <div ng-if="search.type == 'gene' && url.includes('gene') && message.data.http !== 404 && message.data.http !== 400" class="result-row">
      <div ng-repeat="datum in message.data">
        <div class="result-box"><div class="result-header">{{datum.chr}} : {{datum.chrpos}} {{datum.ref}} > {{datum.alt}}</div>
                                      <div class="result-contents"><b>Assembly:</b> {{ datum.assembly }}<br>
                                      <b>Accession:</b> {{ datum.accession }}<br>
                                      <b>Assembly Accession Version:</b> {{ datum.accession_ver }}<br></div>
                                      <!--<input type="checkbox" /> Select this mutation for dataset mass search<br>-->
                                      <a target="_bank" href="https://beacon-network.org/#/search?pos={{datum.chrpos}}&chrom={{datum.chr}}&allele={{datum.alt}}&ref={{datum.ref}}&rs={{datum.assembly}}"><button class="btn" style="background-color:#F57C20;color:#FFF" value="Find Datasets">Beacon Network</button></a>
                                      <button ng-click="findDatasets(datum.chr, datum.chrpos, datum.ref, datum.alt, datum.assembly)" class="btn" style="background-color:#F57C20;color:#FFF" value="Find Datasets">Find Datasets</button>
                                    </div>
      </div>
  </div>
  <div ng-if="search.type == 'variant'" class="result-row">
    <div ng-if="message == 'q'" style="text-align:center;margin-top:50px;">{{err}}<br><i class="fas fa-circle-notch icon_animation"></i></div>
    <div ng-repeat="datum in message.data">
      <div ng-if="datum.response">
        <div class="beacon-container">
          <div class="beacon-header">{{datum.beacon}}</div>
          <div class="beacon-content">Metadata about dataset and/or beacon.</div>
          <div class="beacon-content"><button class="btn" style="background-color:#F57C20;color:#FFF">Contact Beacon</button></div>
        </div>
      </div>
    </div>
  </div>
  <div style="text-align:center"><div ng-if="message.data.http">{{message.data.msg}}</div></div>
</div>
